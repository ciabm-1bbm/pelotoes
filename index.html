<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portal 1º BBM - Bombeiro Militar RS</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>

    <header class="main-header">
        <div class="container header-content">
            <div class="logo">
                <img src="logo_1bbm.png" alt="Logo 1º BBM" class="header-logo">
                <img src="logo_cbmrs.png" alt="Logo CBMRS" class="header-logo">
            </div>
            <h1>Portal Operacional do 1º BBM</h1>
        </div>
    </header>

    <main class="main-content">
        <div class="container">
            <div class="button-grid">
                <a href="#" class="grid-item">
                    <i class="fas fa-map-marked-alt icon"></i>
                    <span>Mapa da Região</span>
                </a>
                <a href="#" class="grid-item">
                    <i class="fas fa-water icon"></i>
                    <span>Mapa de Hidrantes</span>
                </a>
                <a href="#" class="grid-item">
                    <i class="fas fa-book-open icon"></i>
                    <span>Procedimento Operacional Padrão</span>
                </a>
                <a href="#" class="grid-item">
                    <i class="fas fa-gas-pump icon"></i>
                    <span>Consulta Saldo Cartão Combustível</span>
                </a>

                <a href="#" class="grid-item">
                    <i class="fas fa-clipboard-list icon"></i>
                    <span>Ficha de Ocorrência</span>
                </a>
                <a href="#" class="grid-item">
                    <i class="fas fa-car-crash icon"></i>
                    <span>Ficha de Acidente com Viaturas</span>
                </a>
                <a href="#" class="grid-item">
                    <i class="fas fa-car icon"></i>
                    <span>Consulta Veículos</span>
                </a>

                <a href="#" class="grid-item">
                    <i class="fas fa-search-location icon"></i>
                    <span>Consulta Endereços</span>
                </a>
                <a href="#" class="grid-item">
                    <i class="fas fa-phone-square-alt icon"></i>
                    <span>Consulta Telefones Úteis</span>
                </a>
                <a href="#" class="grid-item">
                    <i class="fas fa-gavel icon"></i>
                    <span>Consulta Normas Técnicas</span>
                </a>
                <a href="#" class="grid-item">
                    <i class="fas fa-clipboard-check icon"></i>
                    <span>Consulta POPs</span>
                </a>
                <a href="#" class="grid-item">
                    <i class="fas fa-calendar-alt icon"></i>
                    <span>Consulta Escalas</span>
                </a>
                <a href="#" class="grid-item">
                    <i class="fas fa-calendar-day icon"></i>
                    <span>Consulta Plantões</span>
                </a>
                <a href="#" class="grid-item">
                    <i class="fas fa-users icon"></i>
                    <span>Consulta Efetivo</span>
                </a>
                <a href="#" class="grid-item">
                    <i class="fas fa-ambulance icon"></i>
                    <span>Consulta Viaturas</span>
                </a>
                <a href="#" class="grid-item">
                    <i class="fas fa-ellipsis-h icon"></i>
                    <span>Outros Recursos</span>
                </a>
            </div>
        </div>
    </main>

    <div class="login-modal" id="loginModal">
        <div class="login-box">
            <img src="logo_cbmrs.png" alt="CBMRS" class="login-logo">
            <h2>Autenticação</h2>
            <div class="input-group">
                <label for="idFuncional"><i class="fas fa-id-badge"></i> Identidade Funcional:</label>
                <input type="text" id="idFuncional" placeholder="Digite sua identidade">
            </div>
            <div class="input-group">
                <label for="senha"><i class="fas fa-lock"></i> Senha:</label>
                <input type="password" id="senha" placeholder="Digite sua senha">
            </div>
            <label class="remember-me">
                <input type="checkbox" id="lembrar"> Lembrar senha
            </label>
            <button onclick="login()"><i class="fas fa-sign-in-alt"></i> Entrar</button>
            <p id="loginErro" class="error-message"></p>
        </div>
    </div>

    <script src="js/script.js"></script>
</body>
</html>
const usuarios = {
    "685582": { role: "admin", nomeGuerra: "HOMRICH" },
    "3698653": { role: "admin", nomeGuerra: "JULIA" },
    "4354737": { role: "admin", nomeGuerra: "BRUNO" },
    "4279310": { role: "admin", nomeGuerra: "MARTINS" },
    "3146316": { role: "admin", nomeGuerra: "LOPES" },
    "3696790": { role: "admin", nomeGuerra: "DA COSTA" },
    "2822130": { role: "admin", nomeGuerra: "MEDEIROS" },
    "3696391": { role: "padrao", nomeGuerra: "BOTTINI" },
    "3205614": { role: "admin", nomeGuerra: "HERMENEGILDO" },
    "4672410": { role: "admin", nomeGuerra: "GARIBALDI" }
};

function login() {
    const id = document.getElementById("idFuncional").value;
    const senha = document.getElementById("senha").value.toLowerCase();
    const lembrar = document.getElementById("lembrar").checked;
    const loginErro = document.getElementById("loginErro");
    const loginModal = document.getElementById("loginModal");

    if (usuarios[id] && senha === (usuarios[id].nomeGuerra.toLowerCase() + "193")) {
        if (lembrar) {
            localStorage.setItem("login", id);
        } else {
            localStorage.removeItem("login"); // Remove se o "lembrar" não estiver marcado
        }
        loginModal.classList.remove("active"); // Remove a classe 'active' para fechar o modal
        loginErro.innerText = ""; // Limpa qualquer mensagem de erro anterior
    } else {
        loginErro.innerText = "Identidade ou senha incorreta.";
    }
}

// Função para exibir o modal
function showLoginModal() {
    const loginModal = document.getElementById("loginModal");
    loginModal.classList.add("active"); // Adiciona a classe 'active' para exibir o modal
    document.getElementById("idFuncional").value = ""; // Limpa campos ao abrir
    document.getElementById("senha").value = "";
    document.getElementById("loginErro").innerText = "";
}

// Ao carregar a página, verifica se o usuário já está logado
window.onload = function() {
    const saved = localStorage.getItem("login");
    // Se não há login salvo ou o ID salvo não existe na lista de usuários, exibe o modal após um pequeno atraso.
    // O atraso dá tempo para o CSS carregar e a transição ficar mais suave.
    setTimeout(() => {
        if (!saved || !usuarios[saved]) {
            showLoginModal();
        }
    }, 500); // Reduzindo o tempo para 0.5 segundos para uma experiência mais ágil.
};

// Fechar o modal ao clicar fora da caixa de login
document.addEventListener('click', function(event) {
    const loginModal = document.getElementById('loginModal');
    const loginBox = document.querySelector('.login-box');

    // Verifica se o modal está ativo e se o clique foi fora da caixa de login
    if (loginModal.classList.contains('active') && !loginBox.contains(event.target)) {
        // Evita fechar se o clique for em um input dentro da caixa de login
        if (!event.target.closest('.login-box')) {
            loginModal.classList.remove('active');
        }
    }
});
